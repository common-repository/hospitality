/*! hospitality 2016-11-28 */
var resApp;resApp=angular.module("roomReservationApp",["ngRoute","jkuri.datepicker","ngAnimate","ngSanitize","angularSpinner","ui.bootstrap","ngMap","checklist-model"]).config(function(a,b){b.html5Mode({enabled:!0,requireBase:!1}),a.when("/"+objectl10n.searchAndReserveSlug,{templateUrl:objectl10n.partialsURL+"room-search.html",controller:"roomReservationController",controllerAs:"roomReservation"}).when("/"+objectl10n.browseAndReserveSlug,{templateUrl:objectl10n.partialsURL+"room-browse.html",controller:"roomReservationController",controllerAs:"roomReservation"})}).controller("roomReservationController",["$scope","$route","$routeParams","$location","$anchorScroll","searchService","utilityService","userRegistrationService","usSpinnerService","$uibModal","NgMap",function(a,b,c,d,e,f,g,h,i,j,k){a.roomReservation=this,a.roomReservation.request={},a.roomReservation.userRegistrationRequest={},a.roomReservation.loginRequest={},a.roomReservation.loginRequest.nonce=objectl10n.loginFormNonce,a.roomReservation.isLoggedIn=!1,a.roomReservation.isRegistered=!1,a.roomReservation.userRegistrationl10n=objectl10n.userRegistrationl10n,a.roomReservation.loginError="",a.roomReservation.displayRegistration=!1,a.roomReservation.displayLogin=!1,a.roomReservation.displayRoomInfo=!1,a.roomReservation.loginControlClass="displayed-section",a.roomReservation.registrationControlClass="displayed-section",a.roomReservation.loginControl=decodeURI(a.roomReservation.userRegistrationl10n.loginLinkContent),a.roomReservation.loginControlTitle=a.roomReservation.userRegistrationl10n.loginLinkTitle,a.roomReservation.showUserRegistrationForm=function(){a.registrationModal=modalInstance=j.open({templateUrl:objectl10n.partialsURL+"user-registration.html",scope:a,windowTopClass:"registration-modal",size:"lg"})},a.roomReservation.hideUserRegistrationForm=function(){a.registrationModal.close()},a.roomReservation.showLoginForm=function(){a.loginModal=modalInstance=j.open({templateUrl:objectl10n.partialsURL+"user-login.html",scope:a,windowTopClass:"login-modal"})},a.roomReservation.hideLoginForm=function(){a.loginModal.close()},a.roomReservation.toggleLogin=function(){a.roomReservation.isLoggedIn?a.roomReservation.logout():a.roomReservation.showLoginForm()};var l=new Date;a.roomReservation.today=l,a.roomReservation.request.dateOfArrival=new Date(l.getFullYear(),l.getMonth(),l.getDate()),g.setCheckinTimestamp(a),a.roomReservation.searchableAmenities=objectl10n.searchableAmenities.split(","),a.roomReservation.request.lengthOfStay="",a.roomReservation.amenitiesTitle=objectl10n.amenitiesTitle,a.roomReservation.request.numberOfOccupants="",a.roomReservation.request.adults=1,a.roomReservation.request.children=0,a.roomReservation.roomListClass="hidden-section",a.roomReservation.listOpenButtonClass="hidden-section",a.roomReservation.reservationFormClass="hidden-section",a.roomReservation.confirmationClass="hidden-section",a.roomReservation.offlineInstructionsClass="hidden-section",a.roomReservation.roomDetailClass="hidden-section",1==objectl10n.enableUserControls?a.roomReservation.userControlsClass="displayed-section":a.roomReservation.userControlsClass="hidden-section",a.roomReservation.paymentInfoClass="hidden-section",a.roomReservation.cardInfoRequired="",a.roomReservation.dateOfArrivalLabel=objectl10n.dateOfArrivalLabel,a.roomReservation.lengthOfStayLabel=objectl10n.lengthOfStayLabel,a.roomReservation.numberOfOccupantsLabel=objectl10n.numberOfOccupantsLabel,a.roomReservation.maximumPriceLabel=objectl10n.maximumPriceLabel,a.roomReservation.selectedAmenitiesLabel=objectl10n.selectedAmenitiesLabel,a.roomReservation.firstNameLabel=objectl10n.firstNameLabel,a.roomReservation.lastNameLabel=objectl10n.lastNameLabel,a.roomReservation.companyNameLabel=objectl10n.companyNameLabel,a.roomReservation.address1Label=objectl10n.address1Label,a.roomReservation.address2Label=objectl10n.address2Label,a.roomReservation.cityLabel=objectl10n.cityLabel,a.roomReservation.stateLabel=objectl10n.stateLabel,a.roomReservation.zipLabel=objectl10n.zipLabel,a.roomReservation.countryLabel=objectl10n.countryLabel,a.roomReservation.phoneLabel=objectl10n.phoneLabel,a.roomReservation.mobileLabel=objectl10n.mobileLabel,a.roomReservation.adultsLabel=objectl10n.adultsLabel,a.roomReservation.childrenLabel=objectl10n.childrenLabel,a.roomReservation.emailLabel=objectl10n.emailLabel,a.roomReservation.amountChargedLabel=objectl10n.amountChargedLabel,a.roomReservation.roomSearchOpenLabel=objectl10n.roomSearchOpenLabel,a.roomReservation.roomListOpenLabel=objectl10n.roomListOpenLabel,a.roomReservation.roomReservationOpenLabel=objectl10n.roomReservationOpenLabel,a.roomReservation.makeAnotherReservationLabel=objectl10n.makeAnotherReservationLabel,a.roomReservation.pricePerDayLabel=objectl10n.pricePerDayLabel,a.roomReservation.roomAmountLabel=objectl10n.roomAmountLabel,a.roomReservation.feeAmountLabel=objectl10n.feeAmountLabel,a.roomReservation.taxAmountLabel=objectl10n.taxAmountLabel,a.roomReservation.totalLabel=objectl10n.totalLabel,a.roomReservation.cardNumberLabel=objectl10n.cardNumberLabel,a.roomReservation.cardExpirationLabel=objectl10n.cardExpirationLabel,a.roomReservation.cardExpirationMonthLabel=objectl10n.cardExpirationMonthLabel,a.roomReservation.cardExpirationYearLabel=objectl10n.cardExpirationYearLabel,a.roomReservation.cardCVCLabel=objectl10n.cardCVCLabel,a.roomReservation.nameOnCardLabel=objectl10n.nameOnCardLabel,a.roomReservation.payPalLabel=objectl10n.payPalLabel,a.roomReservation.paymentGatewayPayPalExpress=objectl10n.paymentGatewayPayPalExpress,a.roomReservation.offlineLabel=objectl10n.offlineLabel,a.roomReservation.currentPriceLabel=objectl10n.currentPriceLabel,a.roomReservation.paymentGatewayOffline=objectl10n.paymentGatewayOffline,a.roomReservation.paymentGatewayOfflineInstructions=objectl10n.paymentGatewayOfflineInstructions,a.roomReservation.noRoomsFoundMessage=objectl10n.noRoomsFoundMessage,a.roomReservation.dateOfArrivalErrorMessage=objectl10n.dateOfArrivalErrorMessage,a.roomReservation.seeMoreInfoLabel=objectl10n.seeMoreInfoLabel,a.roomReservation.detailsLabel=objectl10n.detailsLabel,a.roomReservation.reserveLabel=objectl10n.reserveLabel,a.roomReservation.detailsTitle=objectl10n.detailsTitle,a.roomReservation.lengthOfStayLabel=objectl10n.lengthOfStayLabel,a.roomReservation.numberOfGuestsLabel=objectl10n.numberOfGuestsLabel,a.roomReservation.maxPriceLabel=objectl10n.maxPriceLabel,a.roomReservation.locationsLabel=objectl10n.locationsLabel,a.roomReservation.dailyPriceLabel=objectl10n.dailyPriceLabel,a.roomReservation.roomDescriptionLabel=objectl10n.roomDescriptionLabel,a.roomReservation.filterLabel=objectl10n.filterLabel,a.roomReservation.confirmationHeading=objectl10n.confirmationHeading,a.roomReservation.checkInTimeLabel=objectl10n.checkInTimeLabel,a.roomReservation.checkOutTimeLabel=objectl10n.checkOutTimeLabel,a.roomReservation.checkInTime=objectl10n.checkInTime,a.roomReservation.checkOutTime=objectl10n.checkOutTime,a.roomReservation.topSharedContentArea=decodeURI(objectl10n.topSharedContentArea),a.roomReservation.middleSharedContentArea=decodeURI(objectl10n.middleSharedContentArea),a.roomReservation.bottomSharedContentArea=decodeURI(objectl10n.bottomSharedContentArea),a.roomReservation.reservationInstructions=objectl10n.reservationInstructions,a.roomReservation.confirmationMessage=objectl10n.confirmationMessage,a.roomReservation.reservationTimeUnit=objectl10n.reservationTimeUnit,a.roomReservation.roomListTitle=objectl10n.roomListTitle,a.roomReservation.currencySymbol=objectl10n.currencySymbol,a.roomReservation.paymentInfoHeading=objectl10n.paymentInfoHeading,a.roomReservation.reserveButtonIsDisabled=!1,a.roomReservation.countries=objectl10n.countries,a.roomReservation.statesTable=objectl10n.statesTable,a.roomReservation.states=[],a.roomReservation.toggleSearchForm=function(){"displayed-section"==a.roomReservation.searchFormClass?a.roomReservation.searchFormClass="hidden-section":"hidden-section"==a.roomReservation.searchFormClass&&(a.roomReservation.searchFormClass="displayed-section")},a.roomReservation.toggleRoomList=function(){"displayed-section"==a.roomReservation.roomListClass?a.roomReservation.roomListClass="hidden-section":"hidden-section"==a.roomReservation.roomListClass&&(a.roomReservation.roomListClass="displayed-section")},a.roomReservation.closeReservationForm=function(){a.roomReservation.reservationFormClass="hidden-section"},a.roomReservation.countrySelected=function(){a.roomReservation.states=a.roomReservation.statesTable[a.roomReservation.request.country]},a.roomReservation.regCountrySelected=function(){a.roomReservation.states=a.roomReservation.statesTable[a.roomReservation.userRegistrationRequest.country]},a.roomReservation.openReservationForm=function(){(a.roomReservation.isLoggedIn||a.roomReservation.isRegistered)&&(a.roomReservation.request.firstName=a.roomReservation.user.firstName,a.roomReservation.request.lastName=a.roomReservation.user.lastName,a.roomReservation.request.address1=a.roomReservation.user.address1,a.roomReservation.request.address2=a.roomReservation.user.address2,a.roomReservation.request.city=a.roomReservation.user.city,a.roomReservation.request.state=a.roomReservation.user.state,a.roomReservation.request.zip=a.roomReservation.user.postalCode,a.roomReservation.request.country=a.roomReservation.user.country,a.roomReservation.request.email=a.roomReservation.user.email,a.roomReservation.request.phone=a.roomReservation.user.phone,a.roomReservation.request.mobile=a.roomReservation.user.mobile,a.roomReservation.request.country=a.roomReservation.user.country),a.roomReservation.reservationFormClass="displayed-section"},a.roomReservation.reloadSearchPage=function(){location.reload()},a.roomReservation.toggleOfflinePaymentInstructions=function(){a.roomReservation.request.paymentMethod==a.roomReservation.paymentGatewayOffline?a.roomReservation.offlineInstructionsClass="displayed-section":a.roomReservation.offlineInstructionsClass="hidden-section"},a.roomReservation.showRoomInfo=function(b){a.roomInfoModal=j.open({templateUrl:objectl10n.partialsURL+"room-info.html",scope:a,windowTopClass:"registration-modal",size:"lg"}),k.getMap().then(function(a){var b=a.getCenter();google.maps.event.trigger(a,"resize"),a.setCenter(b)})},a.roomReservation.hideRoomInfo=function(){a.roomInfoModal.close()},a.roomReservation.showRoomDetail=function(b){a.roomReservation.selectedRoom=b,a.roomReservation.roomDetailClass="displayed-section",a.$broadcast("initSlider",{}),d.hash("gst-scroll-to-detail"),e(),d.hash(""),""==a.roomReservation.request.lengthOfStay&&(a.roomReservation.request.lengthOfStay=1),a.roomReservation.openReservationForm()},a.roomReservation.searchRooms=function(){i.spin("load-spinner"),f.searchRooms(a).then(function(b){i.stop("load-spinner"),a.roomReservation.reservationFormClass="hidden-section",a.roomReservation.roomDetailClass="hidden-section",null!=b.errorData&&"true"==b.errorData?(a.roomReservation.errorMessage=b.errorMessage,a.roomReservation.errorContainerClass="displayed-section"):(a.roomReservation.rooms=b,a.roomReservation.rooms.length>0?(a.roomReservation.listOpenButtonClass="displayed-section",a.roomReservation.roomListClass="displayed-section",a.roomReservation.errorContainerClass="hidden-section"):(a.roomReservation.errorMessage=a.roomReservation.noRoomsFoundMessage,a.roomReservation.errorContainerClass="displayed-section"))},function(a){i.stop("load-spinner"),console.log("Error on room search")})},a.roomReservation.browseRooms=function(){i.spin("load-spinner"),f.browseRooms(a).then(function(b){i.stop("load-spinner"),null!=b.errorData&&"true"==b.errorData?(a.roomReservation.errorMessage=b.errorMessage,a.roomReservation.errorContainerClass="displayed-section"):(a.roomReservation.rooms=b,a.roomReservation.rooms.length>0?(a.roomReservation.roomListClass="displayed-section",a.roomReservation.errorContainerClass="hidden-section"):(a.roomReservation.errorMessage=a.roomReservation.noRoomsFoundMessage,a.roomReservation.errorContainerClass="displayed-section"))},function(a){i.stop("load-spinner"),console.log("Error on retrieving all room for browsing.")})},a.roomReservation.reserveRoom=function(){i.spin("reserve-spinner"),a.roomReservation.reserveButtonIsDisabled=!0,f.reserveRoom(a).then(function(b){i.stop("reserve-spinner"),null!=b.errorData&&"true"==b.errorData?(a.roomReservation.errorMessage=b.errorMessage,a.roomReservation.errorContainerClass="displayed-section"):("redirect"==b.status?(window.location=b.url,a.roomReservation.confirmation=b.pending_reservation):a.roomReservation.confirmation=b,a.roomReservation.reservationFormClass="hidden-section",a.roomReservation.searchOpenButtonClass="hidden-section",a.roomReservation.listOpenButtonClass="hidden-section",a.roomReservation.confirmationClass="displayed-section",window.scrollTo(0,document.body.scrollHeight))},function(a){i.stop("reserve-spinner"),console.log("Error reserving room.")})},a.roomReservation.getGeoLocation=function(a){f.getGeoLocation(a).then(function(b){a.roomReservation.geoLocation=b,a.roomReservation.request.country=a.roomReservation.geoLocation.country_name,a.roomReservation.request.state=a.roomReservation.geoLocation.region_name,a.roomReservation.states=a.roomReservation.statesTable[a.roomReservation.request.country]},function(a){console.log("Error getting geolocation")})},a.roomReservation.getUser=function(){h.getUser(a).then(function(b){null!=b.errorData&&"true"==b.errorData?a.roomReservation.errorMessage=b.errorMessage:(a.roomReservation.user=b,0!=a.roomReservation.user.id?(a.roomReservation.isLoggedIn=!0,a.roomReservation.isRegistered=!0,a.roomReservation.loginControl=a.roomReservation.userRegistrationl10n.logoutLinkContent,a.roomReservation.loginControlTitle=a.roomReservation.userRegistrationl10n.logoutLinkTitle,a.roomReservation.registrationControlClass="hidden-section"):(a.roomReservation.isLoggedIn=!1,a.roomReservation.isRegistered=!1,a.roomReservation.loginControl=decodeURI(a.roomReservation.userRegistrationl10n.loginLinkContent),a.roomReservation.loginControlTitle=a.roomReservation.userRegistrationl10n.loginLinkTitle,a.roomReservation.registrationControlClass="displayed-section",a.roomReservation.errorMessage=a.roomReservation.userRegistrationl10n.registrationFailedMessage))},function(a){console.log("Error retrieving user data.")})},a.roomReservation.registerUser=function(){i.spin("registration-spinner"),h.registerUser(a).then(function(b){i.stop("registration-spinner"),null!=b.errorData&&"true"==b.errorData?(a.roomReservation.errorMessage=b.errorMessage,a.roomReservation.hideUserRegistrationForm()):(a.roomReservation.user=b,0!=a.roomReservation.user.id?(a.roomReservation.isRegistered=!0,a.roomReservation.registrationControlClass="hidden-section",a.roomReservation.hideUserRegistrationForm(),a.roomReservation.errorMessage=a.roomReservation.userRegistrationl10n.postRegistrationMessage,a.roomReservation.errorContainerClass="displayed-section"):a.roomReservation.isRegistered=!1)},function(a){i.stop("registration-spinner"),console.log("Error retrieving user data.")})},a.roomReservation.login=function(){i.spin("login-spinner"),h.login(a).then(function(b){i.stop("login-spinner"),null!=b.errorData&&"true"==b.errorData?a.roomReservation.errorMessage=b.errorMessage:b.loggedIn?(a.roomReservation.loginError="",a.roomReservation.getUser(),a.roomReservation.hideLoginForm(),location.reload()):a.roomReservation.loginError=a.roomReservation.userRegistrationl10n.loginFailedMessage},function(a){i.stop("login-spinner"),console.log("Error logging in.")})},a.roomReservation.logout=function(){i.spin("logout-spinner"),h.logout(a).then(function(b){i.stop("logout-spinner"),null!=b.errorData&&"true"==b.errorData?a.roomReservation.errorMessage=b.errorMessage:"false"==b.loggedIn?(a.roomReservation.loginError="",a.roomReservation.getUser(),location.reload()):a.roomReservation.loginError=a.roomReservation.userRegistrationl10n.logoutFailedMessage},function(a){i.stop("logout-spinner"),console.log("Error logging out.")})},a.roomReservation.getGeoLocation(a),b.current.originalPath=="/"+objectl10n.searchAndReserveSlug&&(a.roomReservation.getUser(),a.roomReservation.searchRooms()),b.current.originalPath=="/"+objectl10n.browseAndReserveSlug&&(a.roomReservation.getUser(),a.roomReservation.browseRooms())}]),resApp.controller("ModalCtrl",["$scope","$uibModalInstance",function(a,b){var c=this;a.roomReservation;c.close=function(){b.close()}}]),resApp.factory("searchService",function(a,b,c,d){"use strict";var e={};return e.searchRooms=function(c){var e=a.defer();return c.roomReservation.request.lengthOfStayLong=864e5*c.roomReservation.request.lengthOfStay,d.setCheckinTimestamp(c),b({method:"GET",url:"/wp-admin/admin-ajax.php",params:{action:"hospitality_ajax",fn:"get_available_rooms",searchCriteria:c.roomReservation.request}}).success(function(a){e.resolve(a)}).error(function(a){e.reject("There was an error!")}),e.promise},e.browseRooms=function(c){var d=a.defer();return b({method:"GET",url:"/wp-admin/admin-ajax.php",params:{action:"hospitality_ajax",fn:"get_all_rooms"}}).success(function(a){d.resolve(a)}).error(function(a){d.reject("There was an error!")}),d.promise},e.reserveRoom=function(c){var d=a.defer();return c.roomReservation.request.lengthOfStayLong=864e5*c.roomReservation.request.lengthOfStay,c.roomReservation.request.selectedRoomID=c.roomReservation.selectedRoom.id,b({method:"GET",url:"/wp-admin/admin-ajax.php",params:{action:"hospitality_ajax",fn:"reserve_room",reservationInfo:c.roomReservation.request}}).success(function(a){d.resolve(a)}).error(function(a){d.reject("There was an error!")}),d.promise},e.getGeoLocation=function(c){var d=a.defer();return b({method:"GET",url:"//freegeoip.net/json/",dataType:"jsonp"}).success(function(a){d.resolve(a)}).error(function(a){d.reject("There was an error!")}),d.promise},e}),resApp.factory("utilityService",function(){"use strict";var a={};return a.setCheckinTimestamp=function(a){var b=0;objectl10n.checkInTime.endsWith("PM")&&(b=12);var c=objectl10n.checkInTime.split(":"),d=parseInt(c[0]),e=c[1].split(" "),f=parseInt(e[0]);if(b+=d,b+=f/60,a.roomReservation.request.dateOfArrival instanceof Date)var g=a.roomReservation.request.dateOfArrival;else var g=new Date(a.roomReservation.request.dateOfArrival);a.roomReservation.request.dateOfArrivalLong=g.getTime();var h=new Date(a.roomReservation.today.getFullYear(),a.roomReservation.today.getMonth(),a.roomReservation.today.getDate()).getTime();a.roomReservation.request.dateOfArrivalLong<h&&(a.roomReservation.request.dateOfArrivalLong=h),a.roomReservation.request.dateOfArrivalLong+=60*b*60*1e3},a}),resApp.directive("ignoreMouseWheel",function(a){return{restrict:"A",link:function(a,b,c){b.bind("mousewheel",function(a){b.blur()})}}}),resApp.directive("validateDateOfArrival",function(){return{require:"ngModel",link:function(a,b,c,d){function e(a){var b=new Date(a).getTime(),c=new Date,e=new Date(c.getFullYear(),c.getMonth(),c.getDate()).getTime();if(e>b){var f=new moment;a=f.format(objectl10n.dateFormat),d.$setValidity("arrivalDateError",!1)}else d.$setValidity("arrivalDateError",!0);return a}d.$parsers.push(e)}}}),resApp.directive("ngSize",function(){return{restrict:"A",link:function(a,b,c){"SELECT"!==!b.nodeName&&c.$observe("ngSize",function(a){c.$set("size",c.ngSize)})}}}),resApp.directive("slider",function(a){return{restrict:"AE",replace:!0,scope:{images:"=",sliderConfig:"="},link:function(b,c,d){b.currentIndex=0,b.next=function(){b.currentIndex<b.images.length-1?b.currentIndex++:b.currentIndex=0},b.prev=function(){b.currentIndex>0?b.currentIndex--:b.currentIndex=b.images.length-1},b.first=function(){b.currentIndex=0},b.displayCurrent=function(){void 0!=b.images&&(b.images.forEach(function(a){a.visible=!1}),b.images[b.currentIndex].visible=!0)},b.$watch("images",function(){b.displayCurrent(),b.sliderTimer()}),b.$watch("currentIndex",function(){b.displayCurrent()});var e;b.sliderTimer=function(){void 0!=b.images&&(a.cancel(e),e=a(function(){void 0!==b.images&&(b.next(),e=a(b.sliderTimer,b.sliderConfig.slide_duration))},b.sliderConfig.slide_duration))},b.$on("initSlider",function(a,c){b.displayCurrent(),b.sliderTimer()}),b.$on("$destroy",function(){a.cancel(e)})},templateUrl:objectl10n.partialsURL+"slider.html"}}),resApp.directive("reservationForm",function(a){return{restrict:"E",replace:!0,scope:{roomReservation:"="},link:function(a,b,c){},templateUrl:objectl10n.partialsURL+"reservation-form.html"}}),resApp.directive("roomBrowse",function(a){return{restrict:"E",replace:!0,scope:{roomReservation:"="},link:function(a,b,c){},templateUrl:objectl10n.partialsURL+"room-browse.html"}}),resApp.directive("roomInfo",function(a){return{restrict:"E",replace:!0,scope:{roomReservation:"="},link:function(a,b,c){},templateUrl:objectl10n.partialsURL+"room-info.html"}}),resApp.factory("userRegistrationService",function(a,b,c,d){"use strict";var e={};return e.getUser=function(c){var d=a.defer();return b({method:"GET",url:"/wp-admin/admin-ajax.php",params:{action:"hospitality_ajax",fn:"get_user",userRegistrationRequest:c.roomReservation.userRegistrationRequest}}).success(function(a){d.resolve(a)}).error(function(a){d.reject("There was an error sending get user request.")}),d.promise},e.registerUser=function(c){var d=a.defer();return b({method:"GET",url:"/wp-admin/admin-ajax.php",params:{action:"hospitality_ajax",fn:"register_user",userRegistrationRequest:c.roomReservation.userRegistrationRequest}}).success(function(a){d.resolve(a)}).error(function(a){d.reject("There was an error while registering user!")}),d.promise},e.login=function(c){var d=a.defer();return b({method:"GET",url:"/wp-admin/admin-ajax.php",params:{action:"ajaxlogin",username:c.roomReservation.loginRequest.userName,password:c.roomReservation.loginRequest.password,security:c.roomReservation.loginRequest.nonce}}).success(function(a){d.resolve(a)}).error(function(a){d.reject("There was an error logging in!")}),d.promise},e.logout=function(c){var d=a.defer();return b({method:"GET",url:"/wp-admin/admin-ajax.php",params:{action:"hospitality_ajax",fn:"logout",userRegistrationRequest:c.roomReservation.userRegistrationRequest}}).success(function(a){d.resolve(a)}).error(function(a){d.reject("There was an error while logging out.")}),d.promise},e}),resApp.directive("registerUser",function(a){return{restrict:"E",replace:!0,scope:{roomReservation:"="},link:function(a,b,c){},templateUrl:objectl10n.partialsURL+"user-registration.html"}}),resApp.directive("login",function(a){return{restrict:"E",replace:!0,scope:{roomReservation:"="},link:function(a,b,c){},templateUrl:objectl10n.partialsURL+"user-login.html"}});